# 인코딩과 디코딩

컴퓨터에서 문자를 어떻게 표현할까?

지금까지 배운 것은 ascii code를 사용하는 것이다.

c에서 아스키코드를 char로 쓰면 그대로 문자로 출력해주던 것이 기억이 난다.

이런것을 인코딩이라고 한다.A를 아스키코드로 인코딩 하면 065이다.

065를 디코딩하면 A이다.

이 때 65 이 자체를 문자 코드라고 하고 065처럼 특정한 형식으로 맞춰놓은 것을 문자 인코딩이라고한다.따라서 코드가 같더라도 인코딩 방식이 다르다면 제대로 호환이 되지 않는다.



문제는 7비트의 아스키코드로는 영어말고는 담을 수가 없다는 것이다.

한글은 몰라도 한자나 아프리카 언어를 생각하면..

그리고 그 문제가 실제로 일어나버렸다. 각 나라마다 다른방식으로 문자를 표현하기 시작했다.

그래서 뷁같은 한글깨짐등이 발생한 것이다.

이를 해결하기 위해 유니코드가 탄생했다.



## 유니코드

아스키코드를 보완하기위해 유니코드는 16비트(2바이트)를 가지고 탄생했다.그러나 그럼에도 문자를 모두 담을 수 없었고, 가변길이인코딩을 도입해서 필요할 때에는 총 32비트까지 인코딩에 사용할 수 있게 만들었다.

여기서 문제는 유니코드의 UTF-16과 아스키코드는 인코딩방식이 다르다는 것이다.또 리틀엔디안 빅엔디안 등으로 호환에 문제가 생겼다고 한다. 

UTF-8인코딩은 유니코드가 아스키코드를 하위호환하게 해주고, 엔디안문제를 해결해줬기 떄문에 사실상의 표준으로 채택되었다. 그래도 종종 다른방식의 인코딩을 볼 수 있다(한글깨짐으로..)



즉 UTF-8은 유니코드를 표현하는 방식중 하나이다. 



## 인코딩을 하는 이유

사실 c에서 아스키코드로 문자를 표현했듯이, 그냥 그렇게 쓰면 되지(?) 왜 인코딩이 문제가 되는지가 궁금하다.

문제는 인코딩방식이 통일되지 않았다는 것이다. 물론 utf-8이 거의 표준이긴 하다. 하지만 utf-8을 쓰지 않는 곳도 많다. 예를 들면 윈도우즈의 기본 인코딩이 그렇다.지금까지 다른방식으로 인코딩해온 것들이 있기 떄문이다.

내가 문자 '가'를 입력했다고 하자. 이 가는 이진수로 어떻게 저장되어있는가? 모른다.사실 후보가 몇개 있긴 하다. euc-kr이나 utf-8이긴 할것이다.여기선 편의를 위해 euc-kr이라고 하겠다.

그러면 인코딩은 

1. "가".decode('euc-kr') 로 euc-kr로 인코딩되어잇는 '가'를 유니코드로 디코드한다.
2. .encode('utf-8')로 그것을 utf-8로 인코딩해준다.

이것은 예시일 뿐이고, 언어와 환경에서 어떻게 인코딩이 되는지, 또 decode와 encode함수가 정확히 뭘 리턴하는지는 공부를 따로 해야한다. 파이썬에서는 decode가 유니코드를 리턴한다.아마 다른언어도 비슷하기를 바랄뿐..



## base64

base64역시 인코딩의 한 방법...인 것 같다.

사실 이게 인코딩인지는 잘 모르겠다. 하는 짓은 분명 비슷한데, 목적이 좀 다르다.



base64는 이진데이터를 아스키코드로 바꿔주는 인코딩이다.

전자우편(이메일)은 기본적으로 텍스트를 기대한다고 한다.

이게 그냥 데이터를 멀쩡하게 주는게 아니라

프로토콜이라던가, 어떻게 뭐 처리를 하게 된다.예를 들면 내가 11110을 보내면, 메일시스템이 아 이거는 송신하라는 뜻이구나!하고 송신해버리고 11110이란 데이터는 증발해버릴 수 있다.

그래서 데이터를 사실상 모든 컴퓨터시스템이 딱히 처리하지 않는 아스키코드로 정리해서 보내는거다.

그거를 받아서 디코드를 하면 원래데이터가 나오겠지..